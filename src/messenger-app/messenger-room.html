<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../bower_components/image-mask/image-mask.html">
<link rel="import" href="../../bower_components/paper-styles/color.html">
<link rel="import" href="../../bower_components/paper-styles/typography.html">
<link rel="import" href="../messenger-elements/messenger-form.html">
<link rel="import" href="../messenger-elements/messenger-login.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-app.html">
<link rel="import" href="../behaviors/login-behaviors.html">

<dom-module id="messenger-room">
  <style include="iron-flex iron-flex-alignment">
    :host {
      display: block;
      @apply(--paper-font-common-base);
    }

    #home {
      height: 100vh;
      padding: 1em;
      background-color: var(--paper-grey-200);
    }

    #menssages,#form {
      max-width: 80%;
    }

    .avatar {
      max-width: 18%;
      margin-left: 2%;
    }
  </style>

  <template>
    <firebase-app
        auth-domain="messenger-ecf31.firebaseapp.com"
        database-url="https://messenger-ecf31.firebaseio.com"
        api-key="AIzaSyBuLgkuGVwr8Cajfkb7iplcLzbXDbUGMqU"
    >
    </firebase-app>

    <messenger-login id="login" user="{{currentuser}}"></messenger-login>

    <app-location route="{{route}}"></app-location>

    <app-route
      route="{{route}}"
      pattern="/rooms/:roomKey"
      data="{{routeData}}"
    >
    </app-route>

    <div id="home">
      <div class="layout horizontal">
        <div class="flex-auto" id="menssages">
          <h2>Messages</h2>
        </div>
        <div class="flex-auto avatar">
          <image-mask src="http://tecdistro.com/wp-content/uploads/2015/04/user.png?49beef" size="150"></image-mask>
        </div>
      </div>

      <div class="layout horizontal">
        <div class="flex-auto" id="form">
          <messenger-form user="{{currentuser}}" roomkey="{{routeData.roomKey}}"></messenger-form>
        </div>
        <div class="flex-auto avatar">
          <image-mask src="http://findicons.com/files/icons/1072/face_avatars/300/a05.png" size="150"></image-mask>
        </div>
      </div>
    </div>
  </template>

  <script>
    Polymer({
      is: "messenger-room",

      properties: {
        currentuser: Object
      },

      behaviors: [MessengerApp.Login]
    })
  </script>
</dom-module>