<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-document.html">

<dom-module id="messenger-connected-users">
    <style></style>

    <template>
        <firebase-document path="/connected" id="connectedUsers"></firebase-document>
    </template>

    <script>
        Polymer({
            id: "messenger-connected-users",
            ready: function () {
                this.$.connectedUsers.ref.on("child_added", (data) => {
                    this._userAdded(data)
                })

                this.$.connectedUsers.ref.on("child_removed", (data) => {
                    this._userRemoved(data)
                })
            },

            _userAdded: function (data) {
                var userRef = firebase.database().ref("/user/" + data.key)

                userRef.on("value", (data) => {
                    var user = data.val()

                    console.log(user);
                    if (!user) return

                })
            },

            _userRemoved: function (data) {
                console.info('Holis')
            }
        })
    </script>
</dom-module>